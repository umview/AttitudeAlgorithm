% if rawMag(1,1) < 0 && rawMag(2,1) < 0
%     if abs(rawMag(1,1) / rawMag(2,1)) >= 1
%         Q0(1) = 0.195;
%         Q0(2) = -0.015;
%         Q0(3) = 0.0043;
%         Q0(4) = 0.979;
%     else
%         Q0(1) = 0.555;
%         Q0(2) = -0.015;
%         Q0(3) = 0.006;
%         Q0(4) = 0.829;
%     end
% end
% if rawMag(1,1) < 0  && rawMag(2,1) > 0
%     if abs(rawMag(1,1) / rawMag(2,1)) >= 1
%         Q0(1) = -0.193;
%         Q0(2) = -0.009;
%         Q0(3) = -0.006;
%         Q0(4) = 0.979;
%     else
%         Q0(1) = -0.552;
%         Q0(2) = -0.0048;
%         Q0(3) = -0.0115;
%         Q0(4) = 0.8313;
%     end
% end
% if rawMag(1,1) > 0 && rawMag(2,1) > 0
%     if abs(rawMag(1,1) / rawMag(2,1)) >= 1
%         Q0(1) = -0.9785;
%         Q0(2) = 0.008;
%         Q0(3) = -0.02;
%         Q0(4) = 0.195;
%     else
%         Q0(1) = -0.9828;
%         Q0(2) = 0.002;
%         Q0(3) = -0.0167;
%         Q0(4) = 0.5557;
%     end
% end
% if rawMag(1,1) > 0 && rawMag(2,1) < 0
%     if abs(rawMag(1,1) / rawMag(2,1)) >= 1
%         Q0(1) = -0.979;
%         Q0(2) = 0.0116;
%         Q0(3) = -0.0167;
%         Q0(4) = -0.195;
%     else
%         Q0(1) = -0.83;
%         Q0(2) = 0.014;
%         Q0(3) = -0.012;
%         Q0(4) = -0.556;
%     end
% end
%------------test----------------------%
t = load('raw.txt');
Accel = t(:,[1,2,3])';
Gyro = t(:,[4,5,6])';
Mag = t(:,[7,8,9])';
Q = QuaternionInit(Accel(:,1), Mag(:,1));
bCn = getbCn(Q);

Q
bCn
